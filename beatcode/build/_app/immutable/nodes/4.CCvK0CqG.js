import{c as W,b as g,l as X,t as z,d as J}from"../chunks/disclose-version.DNeGZg_n.js";import{i as Z}from"../chunks/legacy.DHap8d6_.js";import{P as ee,k as te,az as re,aA as ae,ae as H,aB as ne,aC as I,j as oe,ac as se,aD as le,m as ie,a as fe,p as ce,s as b,f as ue,t as L,c as be,F as D,g as c,d as T,h as u,r as E,e as d}from"../chunks/runtime.DFhORxxn.js";import{l as _e,e as V,a as U,s as he,r as de}from"../chunks/render.B2rDNRxt.js";import{i as B}from"../chunks/if.BKHM_gne.js";import{r as R}from"../chunks/attributes.BkTGC4t9.js";import{g as me}from"../chunks/entry.DQUJtFr7.js";var pe="font-weight: bold",ge="font-weight: normal";function q(e){console.warn(`%c[svelte] state_snapshot_uncloneable
%c${e?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${e}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,pe,ge)}const ve=[];function ye(e,t=!1){if(!t){const r=[],s=m(e,new Map,"",r);if(r.length===1&&r[0]==="")q();else if(r.length>0){const a=r.length>10?r.slice(0,7):r.slice(0,10),l=r.length-a.length;let n=a.map(i=>`- <value>${i}`).join(`
`);l>0&&(n+=`
- ...and ${l} more`),q(n)}return s}return m(e,new Map,"",ve)}function m(e,t,r,s,a=null){if(typeof e=="object"&&e!==null){var l=t.get(e);if(l!==void 0)return l;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ee(e)){var n=Array(e.length);t.set(e,n),a!==null&&t.set(a,n);for(var i=0;i<e.length;i+=1){var v=e[i];i in e&&(n[i]=m(v,t,`${r}[${i}]`,s))}return n}if(te(e)===re){n={},t.set(e,n),a!==null&&t.set(a,n);for(var h in e)n[h]=m(e[h],t,`${r}.${h}`,s);return n}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return m(e.toJSON(),t,`${r}.toJSON()`,s,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return s.push(r),e}}function j(e,t,r=t){var s=ae();_e(e,"input",a=>{e.type==="checkbox"&&I();var l=a?e.defaultValue:e.value;if(l=M(e)?A(l):l,r(l),s&&l!==(l=t())){var n=e.selectionStart,i=e.selectionEnd;e.value=l??"",i!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length))}}),(oe&&e.defaultValue!==e.value||H(t)==null&&e.value)&&r(M(e)?A(e.value):e.value),ne(()=>{e.type==="checkbox"&&I();var a=t();M(e)&&a===A(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function M(e){var t=e.type;return t==="number"||t==="range"}function A(e){return e===""?null:+e}function we(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function xe(e,...t){return H(()=>{try{let r=!1;const s=[];for(const a of t)a&&typeof a=="object"&&se in a?(s.push(ye(a,!0)),r=!0):s.push(a);r&&(le(e),console.log("%c[snapshot]","color: grey",...s))}catch{}}),t}ie();p[D]="src/routes/posts/create/+page.svelte";var Se=U(z('<p style="color: red;"> </p>'),p[D],[[64,1]]),$e=U(z('<h1>Create New Post</h1> <!> <form><label for="title">Title:</label><br> <input type="text" id="title" required><br><br> <label for="subtitle">Subtitle:</label><br> <input type="text" id="subtitle"><br><br> <label for="content">Content:</label><br> <textarea id="content"></textarea><br><br> <label for="image">Image:</label><br> <input type="file" id="image" accept="image/*"><br><br> <button type="submit"><!></button></form>',1),p[D],[[61,0],[67,0,[[68,1],[68,34],[69,1],[69,61],[69,67],[71,1],[71,40],[72,1],[72,58],[72,64],[74,1],[74,38],[75,1],[75,56],[75,62],[77,1],[77,34],[78,1],[78,79],[78,85],[80,1]]]]);function p(e,t){W(new.target),ce(t,!1,p);let r=d(""),s=d(""),a=d(""),l="",n=d(null),i=d(!1);async function v(){u(i,!0),u(n,null);const o={title:c(r),subtitle:c(s),content:c(a),base64_image:l};try{const f=await fetch("http://localhost:8000/posts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!f.ok){const _=await f.json();throw u(n,_.detail||`HTTP error ${f.status}`),new Error(c(n))}me("/")}catch(f){console.error(...xe("error","Error creating post:",f)),u(n,"An error occurred while creating the post.")}finally{u(i,!1)}}function h(o){var P;const _=(P=o.target.files)==null?void 0:P[0];if(_){const C=new FileReader;C.onloadend=()=>{var F;l=((F=C.result)==null?void 0:F.toString().split(",")[1])||""},C.readAsDataURL(_)}}Z();var y=$e(),N=b(ue(y),2);{var Y=o=>{var f=Se(),_=T(f,!0);E(f),L(()=>he(_,c(n))),g(o,f)};B(N,o=>{c(n)&&o(Y)})}var w=b(N,2),x=b(T(w),3);R(x);var S=b(x,7);R(S);var $=b(S,7);de($);var O=b($,7),k=b(O,4),G=T(k);{var K=o=>{var f=J("Creating...");g(o,f)},Q=o=>{var f=J("Create Post");g(o,f)};B(G,o=>{c(i)?o(K):o(Q,!1)})}return E(k),E(w),L(()=>k.disabled=c(i)),j(x,()=>c(r),o=>u(r,o)),j(S,()=>c(s),o=>u(s,o)),j($,()=>c(a),o=>u(a,o)),V("change",O,h),V("submit",w,we(v)),g(e,y),be({...X()})}fe(p);export{p as component};
